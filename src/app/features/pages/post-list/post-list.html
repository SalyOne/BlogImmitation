<div class="post-list-container">
  <!-- ფილტრები -->
  <div class="filter-row">
    <mat-form-field appearance="outline">
      <mat-label>Search by title</mat-label>
      <input
        matInput
        [ngModel]="(titleFilter$ | async)"
        (ngModelChange)="onTitleFilterChange($event)"
        placeholder="Filter posts...">
    </mat-form-field>

    <mat-form-field appearance="outline">
      <mat-label>Sort by date</mat-label>
      <mat-select
        [ngModel]="(sortOrder$ | async)"
        (ngModelChange)="onSortOrderChange($event)">
        <mat-option value="desc">Newest First</mat-option>
        <mat-option value="asc">Oldest First</mat-option>
      </mat-select>
    </mat-form-field>
  </div>
  <!-- პოსტების ჩამონათვალი -->
  <div class="post-list-item-container">

    @if ((loading$ | async)) {
      <div class="loading-state">
        <mat-progress-spinner mode="indeterminate"></mat-progress-spinner>
        <p>პოსტები იტვირთება...</p>
      </div>
    } @else {
      @for (post of (pagedPosts$ | async); track post.id) {
        <app-post-item [postItem]="post"> </app-post-item>
      } @empty {
        <div class="empty-state">
          <mat-icon>article</mat-icon>
          <p>პოსტები ვერ მოიძებნა</p>
        </div>
      }
    }
  </div>
  <!--  პაგინაცია, გამოჩნდება პოსტების ქონის შემთხვევაში -->
  @if ((filteredTotal$ | async)) {
    <mat-paginator
      [length]="(filteredTotal$ | async)"
      [pageIndex]="(pageIndex$ | async)"
      [pageSize]="(pageSize$ | async)"
      [pageSizeOptions]="[5, 10, 20, 50]"
      (page)="onPageChange($event)">
    </mat-paginator>
  }

</div>
